
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="刘钰的个人网站">
      
      
        <meta name="author" content="刘钰">
      
      
        <link rel="canonical" href="https://liuyu-2003.github.io/STUDY/cqwm/">
      
      
        <link rel="prev" href="../JavaBF/">
      
      
        <link rel="next" href="../MySQL/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.47">
    
    
      
        <title>苍穹外卖笔记 - 刘钰的个人网站</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../mkdocs/css/no-footer.css">
    
      <link rel="stylesheet" href="../../mkdocs/css/unordered-list-symbols.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="刘钰的个人网站" class="md-header__button md-logo" aria-label="刘钰的个人网站" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            刘钰的个人网站
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              苍穹外卖笔记
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="切换至夜间模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换至夜间模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="切换至日间模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换至日间模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/liuyu-2003/liuyu-2003.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    liuyu-2003.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../BLOG/" class="md-tabs__link">
          
  
    
  
  博客

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  学习

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ESSAY/" class="md-tabs__link">
          
  
    
  
  随笔

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../REPRODUCE/" class="md-tabs__link">
          
  
    
  
  转载

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ME/" class="md-tabs__link">
          
  
    
  
  我

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../app/" class="md-tabs__link">
          
  
    
  
  应用

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="刘钰的个人网站" class="md-nav__button md-logo" aria-label="刘钰的个人网站" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    刘钰的个人网站
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/liuyu-2003/liuyu-2003.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    liuyu-2003.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../BLOG/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    博客
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            博客
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BLOG/AutoWindows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    如何开机自动进入Windows系统
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BLOG/GitPush/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    解决git push报错问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BLOG/WindowsCannotSleep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    解决Windows系统无法休眠问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BLOG/BingAI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    解决Copilot无法使用问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BLOG/SystemTime/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    解决Windows与Ubuntu双系统时，时间不统一问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BLOG/SQLServerForMac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    如何在Mac上使用SQL Server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BLOG/ReinstallTheSystem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    写给自己的重装系统指南
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BLOG/InstallGym/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    安装gym遇到的问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BLOG/SolveTouchIDFailure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    解决MacBook触控ID失灵
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BLOG/Cors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    解决Cors问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    学习
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LearnGit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LearnMD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Markdown学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LearnCPP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LearnCV/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    计算机视觉学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../JavaJH/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java集合
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../JavaBF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java并发
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    苍穹外卖笔记
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    苍穹外卖笔记
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      介绍一下整个项目
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      后端具体功能
    </span>
  </a>
  
    <nav class="md-nav" aria-label="后端具体功能">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-jwtthreadlocal" class="md-nav__link">
    <span class="md-ellipsis">
      登录功能--JWT、ThreadLocal、拦截器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-jwt" class="md-nav__link">
    <span class="md-ellipsis">
      员工管理-- JWT、全局异常处理器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-pagehelper" class="md-nav__link">
    <span class="md-ellipsis">
      员工分页查询--PageHelper
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-aop" class="md-nav__link">
    <span class="md-ellipsis">
      公共字段自动填充--AOP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-oss" class="md-nav__link">
    <span class="md-ellipsis">
      新增菜品--OSS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      删除菜品
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      删除套餐
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      修改套餐
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      起售停售套餐
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-redis" class="md-nav__link">
    <span class="md-ellipsis">
      营业状态设置--Redis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-httpclient" class="md-nav__link">
    <span class="md-ellipsis">
      微信登录--HttpClient、拦截器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-redis_1" class="md-nav__link">
    <span class="md-ellipsis">
      缓存菜品--Redis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-redismysql" class="md-nav__link">
    <span class="md-ellipsis">
      清理缓存--Redis与MySQL一致性
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-spring-cache" class="md-nav__link">
    <span class="md-ellipsis">
      缓存套餐-- Spring Cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      用户下单
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      添加购物车
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    <span class="md-ellipsis">
      微信支付--内网穿透
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-java8api" class="md-nav__link">
    <span class="md-ellipsis">
      再来一单--Java8流式API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      校验收货地址是否超出配送范围
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-spring-task" class="md-nav__link">
    <span class="md-ellipsis">
      订单状态定时处理-- Spring Task
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-websocket" class="md-nav__link">
    <span class="md-ellipsis">
      来单提醒--WebSocket
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MySQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MyBatis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MyBatis学习
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ESSAY/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    随笔
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            随笔
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    随笔记
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            随笔记
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ESSAY/Jottings/2311/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    随笔记|2311
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    文章
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            文章
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ESSAY/Articles/affection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    剖析爱情
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../REPRODUCE/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    转载
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            转载
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    博客
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            博客
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../REPRODUCE/blog/how-to-ask-questions-the-smart-way/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    提问的智慧
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ME/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    我
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            我
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ME/introduction.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    None
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../app/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    应用
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            应用
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../app/majiang/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    麻将游戏
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      介绍一下整个项目
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      后端具体功能
    </span>
  </a>
  
    <nav class="md-nav" aria-label="后端具体功能">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-jwtthreadlocal" class="md-nav__link">
    <span class="md-ellipsis">
      登录功能--JWT、ThreadLocal、拦截器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-jwt" class="md-nav__link">
    <span class="md-ellipsis">
      员工管理-- JWT、全局异常处理器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-pagehelper" class="md-nav__link">
    <span class="md-ellipsis">
      员工分页查询--PageHelper
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-aop" class="md-nav__link">
    <span class="md-ellipsis">
      公共字段自动填充--AOP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-oss" class="md-nav__link">
    <span class="md-ellipsis">
      新增菜品--OSS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      删除菜品
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      删除套餐
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      修改套餐
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      起售停售套餐
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-redis" class="md-nav__link">
    <span class="md-ellipsis">
      营业状态设置--Redis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-httpclient" class="md-nav__link">
    <span class="md-ellipsis">
      微信登录--HttpClient、拦截器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-redis_1" class="md-nav__link">
    <span class="md-ellipsis">
      缓存菜品--Redis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-redismysql" class="md-nav__link">
    <span class="md-ellipsis">
      清理缓存--Redis与MySQL一致性
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-spring-cache" class="md-nav__link">
    <span class="md-ellipsis">
      缓存套餐-- Spring Cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      用户下单
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      添加购物车
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    <span class="md-ellipsis">
      微信支付--内网穿透
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-java8api" class="md-nav__link">
    <span class="md-ellipsis">
      再来一单--Java8流式API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      校验收货地址是否超出配送范围
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-spring-task" class="md-nav__link">
    <span class="md-ellipsis">
      订单状态定时处理-- Spring Task
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-websocket" class="md-nav__link">
    <span class="md-ellipsis">
      来单提醒--WebSocket
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/liuyu-2003/liuyu-2003.github.io/edit/main/docs/STUDY/cqwm.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="_1">苍穹外卖笔记<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">介绍一下整个项目<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>使用场景是一个点餐系统。
在店家的管理端，前端使用VUE框架搭建，后端使用SpringBoot框架搭建，数据库采用的MySQL；
在顾客的用户端，是一个微信小程序。</p>
<p>从实际使用流程来串一下这个项目以及用到的技术。</p>
<p>首先从前端网页上登录，这里涉及到JWT、拦截器、ThreadLocal等技术。
现在成功登陆进管理系统页面，可以做到对菜品、套餐、订单、员工的增删改查，
这方面我操作数据是使用的MyBatis，用它的分页组件PageHelper，用它的动态SQL。</p>
<p>整个项目还使用了全局异常处理、AOP、Redis缓存等技术</p>
<p>为了避免写（“创建人修改人是谁”这样每个表都有的）重复的代码，运用AOP来实现公共字段的自动填充。
同时使用Redis来进行缓存菜品，可以提高性能。（比如新增了菜，就需要把缓存删了。）</p>
<p>然后再说用户那边，从微信小程序登陆，需要和微信官方的接口收发数据，也就涉及到了HttpClient以及拦截器技术。
登录进来浏览菜单（对菜品、套餐的查操作），添加购物车（插入购物车表）</p>
<p>支付完成后，对管理端页面进行来单提醒，使用WebSocket，此外还有订单状态的定时处理，使用的是Spring Task组件。</p>
<h2 id="_3">后端具体功能<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<h3 id="-jwtthreadlocal">登录功能--JWT、ThreadLocal、拦截器<a class="headerlink" href="#-jwtthreadlocal" title="Permanent link">&para;</a></h3>
<p>登录成功后，生成JWT令牌，返回给前端。</p>
<p>后续请求b中，拦截器中校验JWT令牌，成功就放行，并且把员工id放进ThreadLocal</p>
<p>这个请求b中如果有需要用到员工id，可以直接从Threadlocal中获取，不需要校验令牌了</p>
<p>如果没有使用ThreadLocal，如果有需要用到员工id，需要再解析一遍JWT才能得到员工id</p>
<p>这就是所谓的“通过ThreadLocal优化鉴权逻辑”。不是说在第一次登录后，后面就不用解析JWT了，创新新品的请求过来，还是要先解析JWT确定当前用户的登录状态，只不过在完成具体业务的时候就可以不再解析JWT了，在拦截器中验证好JWT后，可以往threadlocal里面存具体业务需要的变量。</p>
<h3 id="-jwt">员工管理-- JWT、全局异常处理器<a class="headerlink" href="#-jwt" title="Permanent link">&para;</a></h3>
<ol>
<li>添加员工时重名怎么处理？
   员工表的username列是加了唯一约束的，不允许重复。当重名的时候后端会返回SQL异常</li>
</ol>
<div class="highlight"><pre><span></span><code>Duplicate<span class="w"> </span>entry<span class="w"> </span><span class="s1">&#39;zhangsan&#39;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>key<span class="w"> </span><span class="s1">&#39;employee.idx_username&#39;</span>
</code></pre></div>
<p>那我就返给前端一个提示信息“xxx已存在”，让他换个username
   所以通过全局异常处理器处理：
   创建了一个 GlobalExceptionHandler 类
   类上加 @RestControllerAdvice 可以实现全局的异常处理</p>
<p>方法上加 @ExceptionHandler 会捕获指定的异常</p>
<p>ex.getMessage -&gt; contains -&gt; split[2] -&gt; return msg</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RestControllerAdvice</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GlobalExceptionHandler</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 捕获业务异常</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@ExceptionHandler</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="w"> </span><span class="nf">exceptionHandler</span><span class="p">(</span><span class="n">SQLIntegrityConstraintViolationException</span><span class="w"> </span><span class="n">ex</span><span class="p">){</span>
</code></pre></div>
<ol>
<li>添加员工时怎样动态标明创建人和修改人id
   流程如下：因为我当前是登录状态才能添加员工，所以我有一个JWT，那我先解析JWT得出当前人的id，再用ThreadLocal传给Service的save方法</li>
</ol>
<h3 id="-pagehelper">员工分页查询--PageHelper<a class="headerlink" href="#-pagehelper" title="Permanent link">&para;</a></h3>
<ol>
<li>使用PageHelper分页插件
   本质上就是查询操作，Controller-&gt;Service-&gt;ServiceImpl-&gt;Mapper
   DTO对象里面是员工姓名、页码、每页显示记录数
   封装返回一个PageResult对象，里面是总记录数 和 当前页的数据（这是一个集合List）
   其中，在ServiceImpl里面用到PageHelper分页插件</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="n">PageResult</span><span class="w"> </span><span class="nf">pageQuery</span><span class="p">(</span><span class="n">EmployeePageQueryDTO</span><span class="w"> </span><span class="n">employeePageQueryDTO</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// select * from employee limit 0,10</span>
<span class="w">    </span><span class="c1">//开始分页查询</span>
<span class="w">  </span><span class="c1">// PageHelper.startPage(页码，每页显示的记录数)</span>
<span class="w">    </span><span class="n">PageHelper</span><span class="p">.</span><span class="na">startPage</span><span class="p">(</span><span class="n">employeePageQueryDTO</span><span class="p">.</span><span class="na">getPage</span><span class="p">(),</span><span class="w"> </span><span class="n">employeePageQueryDTO</span><span class="p">.</span><span class="na">getPageSize</span><span class="p">());</span>
<span class="c1">// Page&lt;记录类型&gt; page = 要查的对象的Mapper.方法(DTO)</span>
<span class="w">    </span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">employeeMapper</span><span class="p">.</span><span class="na">pageQuery</span><span class="p">(</span><span class="n">employeePageQueryDTO</span><span class="p">);</span><span class="c1">//后续定义</span>
<span class="w">  </span><span class="c1">//page.getTotal()</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">page</span><span class="p">.</span><span class="na">getTotal</span><span class="p">();</span>
<span class="w">  </span><span class="c1">//page.getResult()</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span><span class="w"> </span><span class="n">records</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">page</span><span class="p">.</span><span class="na">getResult</span><span class="p">();</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PageResult</span><span class="p">(</span><span class="n">total</span><span class="p">,</span><span class="w"> </span><span class="n">records</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<ol>
<li>可以根据姓名查询员工，SQL语句如下</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.sky.mapper.EmployeeMapper&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;pageQuery&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;com.sky.entity.Employee&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>select<span class="w"> </span>*<span class="w"> </span>form<span class="w"> </span>employee
<span class="w">        </span><span class="nt">&lt;where&gt;</span>
<span class="w">            </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;name != null and name != &#39;&#39;&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span>and<span class="w"> </span>name<span class="w"> </span>like<span class="w"> </span>concat(&#39;%&#39;,#{name},&#39;%&#39;)
<span class="w">            </span><span class="nt">&lt;/if&gt;</span>
<span class="w">        </span><span class="nt">&lt;/where&gt;</span>
<span class="w">        </span>order<span class="w"> </span>by<span class="w"> </span>create_time<span class="w"> </span>desc
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>
<h3 id="-aop">公共字段自动填充--AOP<a class="headerlink" href="#-aop" title="Permanent link">&para;</a></h3>
<p>在 新建、修改员工，新建、修改菜品分类 的时候，都有设置当前时间和设置当前用户id的代码，把它抽出来统一处理，简化代码。这里使用的就是AOP切面编程</p>
<ol>
<li>写了一个自定义注解x，只要标注了这个注解就自动填充。</li>
<li>写了一个切面类，声明好只对加了注解x的方法生效。切面类里面通过反射获取对象修改对象，完成自动填充</li>
</ol>
<h3 id="-oss">新增菜品--OSS<a class="headerlink" href="#-oss" title="Permanent link">&para;</a></h3>
<p>技术点：</p>
<ol>
<li>菜品有图片，使用OSS</li>
<li>菜品有口味，有dish和dish_flavor两个表
   new dish对象，dishDTO拷贝进dish，insert进dish表
   此时dish表完事儿了，该dishFlavor表了，从DTO取出从前端传入的口味列表
   插数据需要三个值：dishId、口味名、口味值，缺少dishId
   （因为之前insert的时候用了useGenerateKey，此刻不需要再从数据库中查）直接取出dishId，foreach进去
   insert进dishFlavor表</li>
</ol>
<p><div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">saveWithFlavor</span><span class="p">(</span><span class="n">DishDTO</span><span class="w"> </span><span class="n">dishDTO</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">Dish</span><span class="w"> </span><span class="n">dish</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dish</span><span class="p">();</span>
<span class="w">        </span><span class="n">BeanUtils</span><span class="p">.</span><span class="na">copyProperties</span><span class="p">(</span><span class="n">dishDTO</span><span class="p">,</span><span class="w"> </span><span class="n">dish</span><span class="p">);</span>

<span class="w">        </span><span class="c1">//向菜品表插入1条数据</span>
<span class="w">        </span><span class="n">dishMapper</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">dish</span><span class="p">);</span>

<span class="w">        </span><span class="c1">//获取insert语句生成的主键值</span>
<span class="w">        </span><span class="n">Long</span><span class="w"> </span><span class="n">dishId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dish</span><span class="p">.</span><span class="na">getId</span><span class="p">();</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">DishFlavor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">flavors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dishDTO</span><span class="p">.</span><span class="na">getFlavors</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">flavors</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">flavors</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">flavors</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">dishFlavor</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">dishFlavor</span><span class="p">.</span><span class="na">setDishId</span><span class="p">(</span><span class="n">dishId</span><span class="p">);</span>
<span class="w">            </span><span class="p">});</span>

<span class="w">            </span><span class="c1">//向口味表插入n条数据</span>
<span class="w">            </span><span class="n">dishFlavorMapper</span><span class="p">.</span><span class="na">insertBatch</span><span class="p">(</span><span class="n">flavors</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
3. 口味有多个类（温度、辣度等），需要批量插入，for-each
   Mybatis可以批量插入</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insertBatch&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>insert<span class="w"> </span>into<span class="w"> </span>dish_flavor(dish_id,<span class="w"> </span>name,<span class="w"> </span>value)<span class="w"> </span>VALUES
<span class="w">        </span><span class="nt">&lt;foreach</span><span class="w"> </span><span class="na">collection=</span><span class="s">&quot;flavors&quot;</span><span class="w"> </span><span class="na">item=</span><span class="s">&quot;df&quot;</span><span class="w"> </span><span class="na">separator=</span><span class="s">&quot;,&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span>(#{df.dishId},<span class="w"> </span>#{df.name},<span class="w"> </span>#{df.value})
<span class="w">        </span><span class="nt">&lt;/foreach&gt;</span>
<span class="w">    </span><span class="nt">&lt;/insert&gt;</span>
</code></pre></div>
<h3 id="_4">删除菜品<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>删除一个菜品和批量删除菜品使用同一个接口</p>
<ol>
<li>
<p>起售中的菜品不能删除</p>
</li>
<li>
<p>当菜品属于某个套餐的时候，是不允许被删除的</p>
</li>
<li>
<p>删除菜品后，关联的口味数据也需要删除掉</p>
</li>
</ol>
<p>那么在“根据菜品id查询对应的套餐id”接口中，会用到foreach</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;getSetmealIdsByDishIds&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;java.lang.Long&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>select<span class="w"> </span>setmeal_id<span class="w"> </span>from<span class="w"> </span>setmeal_dish<span class="w"> </span>where<span class="w"> </span>dish_id<span class="w"> </span>in
<span class="w">    </span><span class="nt">&lt;foreach</span><span class="w"> </span><span class="na">collection=</span><span class="s">&quot;dishIds&quot;</span><span class="w"> </span><span class="na">item=</span><span class="s">&quot;dishId&quot;</span><span class="w"> </span><span class="na">separator=</span><span class="s">&quot;,&quot;</span><span class="w"> </span><span class="na">open=</span><span class="s">&quot;(&quot;</span><span class="w"> </span><span class="na">close=</span><span class="s">&quot;)&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>#{dishId}
<span class="w">    </span><span class="nt">&lt;/foreach&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<h3 id="_5">删除套餐<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>可以批量删除</p>
<p>起售中的套餐不能删除</p>
<h3 id="_6">修改套餐<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>先根据id查套餐，用于回显，需要用到套餐表和套餐菜品表</p>
<p>id查套餐，id查套餐菜品，全倒给VO</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="n">SetmealVO</span><span class="w"> </span><span class="nf">getByIdWithDish</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Setmeal</span><span class="w"> </span><span class="n">setmeal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">setmealMapper</span><span class="p">.</span><span class="na">getById</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SetmealDish</span><span class="o">&gt;</span><span class="w"> </span><span class="n">setmealDishes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">setmealDishMapper</span><span class="p">.</span><span class="na">getBySetmealId</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>

<span class="w">    </span><span class="n">SetmealVO</span><span class="w"> </span><span class="n">setmealVO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SetmealVO</span><span class="p">();</span>
<span class="w">    </span><span class="n">BeanUtils</span><span class="p">.</span><span class="na">copyProperties</span><span class="p">(</span><span class="n">setmeal</span><span class="p">,</span><span class="w"> </span><span class="n">setmealVO</span><span class="p">);</span>
<span class="w">    </span><span class="n">setmealVO</span><span class="p">.</span><span class="na">setSetmealDishes</span><span class="p">(</span><span class="n">setmealDishes</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">setmealVO</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>然后就可以修改套餐了。</p>
<ol>
<li>update套餐表</li>
<li>根据套餐id删套餐菜品表</li>
<li>把id赋值给套餐菜品表中的每个菜品（foreach）</li>
<li>把菜品列表插入套餐菜品表</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@Transactional</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="n">SetmealDTO</span><span class="w"> </span><span class="n">setmealDTO</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Setmeal</span><span class="w"> </span><span class="n">setmeal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Setmeal</span><span class="p">();</span>
<span class="w">        </span><span class="n">BeanUtils</span><span class="p">.</span><span class="na">copyProperties</span><span class="p">(</span><span class="n">setmealDTO</span><span class="p">,</span><span class="w"> </span><span class="n">setmeal</span><span class="p">);</span>

<span class="w">        </span><span class="c1">//1、修改套餐表，执行update</span>
<span class="w">        </span><span class="n">setmealMapper</span><span class="p">.</span><span class="na">update</span><span class="p">(</span><span class="n">setmeal</span><span class="p">);</span>

<span class="w">        </span><span class="c1">//套餐id</span>
<span class="w">        </span><span class="n">Long</span><span class="w"> </span><span class="n">setmealId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">setmealDTO</span><span class="p">.</span><span class="na">getId</span><span class="p">();</span>

<span class="w">        </span><span class="c1">//2、删除套餐和菜品的关联关系，操作setmeal_dish表，执行delete</span>
<span class="w">        </span><span class="n">setmealDishMapper</span><span class="p">.</span><span class="na">deleteBySetmealId</span><span class="p">(</span><span class="n">setmealId</span><span class="p">);</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SetmealDish</span><span class="o">&gt;</span><span class="w"> </span><span class="n">setmealDishes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">setmealDTO</span><span class="p">.</span><span class="na">getSetmealDishes</span><span class="p">();</span>
<span class="w">        </span><span class="n">setmealDishes</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">setmealDish</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">setmealDish</span><span class="p">.</span><span class="na">setSetmealId</span><span class="p">(</span><span class="n">setmealId</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">        </span><span class="c1">//3、重新插入套餐和菜品的关联关系，操作setmeal_dish表，执行insert</span>
<span class="w">        </span><span class="n">setmealDishMapper</span><span class="p">.</span><span class="na">insertBatch</span><span class="p">(</span><span class="n">setmealDishes</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<h3 id="_7">起售停售套餐<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>起售套餐时，判断套餐内是否有停售菜品，有停售菜品不行。</p>
<p>用套餐id查菜品列表出来，foreach每个菜</p>
<h3 id="-redis">营业状态设置--Redis<a class="headerlink" href="#-redis" title="Permanent link">&para;</a></h3>
<p>使用到Redis的String。虽然，可以通过一张表来存储营业状态数据，但整个表中只有一个字段，所以意义不大。</p>
<h3 id="-httpclient">微信登录--HttpClient、拦截器<a class="headerlink" href="#-httpclient" title="Permanent link">&para;</a></h3>
<p>流程：小程序端发一个code给后端，后端把code+appid+appsecret发给微信官方服务器，官方返给我openid和session_key，在后端把openid+token给小程序端，小程序端放threadlocal存好，再发带着token，后端解析证明真身。</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">preHandle</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">response</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">handler</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">//判断当前拦截到的是Controller的方法还是其他资源</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">handler</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">HandlerMethod</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">//当前拦截到的不是动态方法，直接放行</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">//1、从请求头中获取令牌</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getHeader</span><span class="p">(</span><span class="n">jwtProperties</span><span class="p">.</span><span class="na">getUserTokenName</span><span class="p">());</span>

<span class="w">        </span><span class="c1">//2、校验令牌</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;jwt校验:{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">token</span><span class="p">);</span>
<span class="w">            </span><span class="n">Claims</span><span class="w"> </span><span class="n">claims</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JwtUtil</span><span class="p">.</span><span class="na">parseJWT</span><span class="p">(</span><span class="n">jwtProperties</span><span class="p">.</span><span class="na">getUserSecretKey</span><span class="p">(),</span><span class="w"> </span><span class="n">token</span><span class="p">);</span>
<span class="w">            </span><span class="n">Long</span><span class="w"> </span><span class="n">userId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Long</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">claims</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">JwtClaimsConstant</span><span class="p">.</span><span class="na">USER_ID</span><span class="p">).</span><span class="na">toString</span><span class="p">());</span>
<span class="w">            </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;当前用户的id：&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">userId</span><span class="p">);</span>
<span class="w">            </span><span class="n">BaseContext</span><span class="p">.</span><span class="na">setCurrentId</span><span class="p">(</span><span class="n">userId</span><span class="p">);</span>
<span class="w">            </span><span class="c1">//3、通过，放行</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">ex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">//4、不通过，响应401状态码</span>
<span class="w">            </span><span class="n">response</span><span class="p">.</span><span class="na">setStatus</span><span class="p">(</span><span class="mi">401</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Autowired</span>
<span class="kd">private</span><span class="w"> </span><span class="n">JwtTokenUserInterceptor</span><span class="w"> </span><span class="n">jwtTokenUserInterceptor</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 注册自定义拦截器</span>
<span class="cm"> * @param registry</span>
<span class="cm"> */</span>
<span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">addInterceptors</span><span class="p">(</span><span class="n">InterceptorRegistry</span><span class="w"> </span><span class="n">registry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;开始注册自定义拦截器...&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">//.........</span>

<span class="w">    </span><span class="n">registry</span><span class="p">.</span><span class="na">addInterceptor</span><span class="p">(</span><span class="n">jwtTokenUserInterceptor</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">addPathPatterns</span><span class="p">(</span><span class="s">&quot;/user/**&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">excludePathPatterns</span><span class="p">(</span><span class="s">&quot;/user/user/login&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">excludePathPatterns</span><span class="p">(</span><span class="s">&quot;/user/shop/status&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="-redis_1">缓存菜品--Redis<a class="headerlink" href="#-redis_1" title="Permanent link">&para;</a></h3>
<p>使用Redis，缓存规则：dish_分类id。</p>
<p>存的String类型，是序列化后的对象</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Autowired</span>
<span class="kd">private</span><span class="w"> </span><span class="n">RedisTemplate</span><span class="w"> </span><span class="n">redisTemplate</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 根据分类id查询菜品</span>
<span class="cm"> * @param categoryId</span>
<span class="cm"> * @return</span>
<span class="cm"> */</span>
<span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/list&quot;</span><span class="p">)</span>
<span class="nd">@ApiOperation</span><span class="p">(</span><span class="s">&quot;根据分类id查询菜品&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DishVO</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">categoryId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;根据分类id查询菜品：{}&quot;</span><span class="p">,</span><span class="n">categoryId</span><span class="p">);</span>

<span class="w">    </span><span class="c1">//构造redis中的key，规则：dish_分类id</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;dish_&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">categoryId</span><span class="p">;</span>

<span class="w">    </span><span class="c1">//查询redis中是否存在菜品数据</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">DishVO</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DishVO</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">opsForValue</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">list</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
<span class="w">        </span><span class="c1">//如果存在，直接返回，无须查询数据库</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Result</span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="n">list</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">//如果不存在，查询数据库，将查询到的数据放入redis中</span>
<span class="w">    </span><span class="n">Dish</span><span class="w"> </span><span class="n">dish</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dish</span><span class="p">();</span>
<span class="w">    </span><span class="n">dish</span><span class="p">.</span><span class="na">setCategoryId</span><span class="p">(</span><span class="n">categoryId</span><span class="p">);</span>
<span class="w">    </span><span class="n">dish</span><span class="p">.</span><span class="na">setStatus</span><span class="p">(</span><span class="n">StatusConstant</span><span class="p">.</span><span class="na">ENABLE</span><span class="p">);</span><span class="c1">//查询起售中的菜品</span>

<span class="w">    </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dishService</span><span class="p">.</span><span class="na">listWithFlavor</span><span class="p">(</span><span class="n">dish</span><span class="p">);</span>
<span class="w">    </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">opsForValue</span><span class="p">().</span><span class="na">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">list</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Result</span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="n">list</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="-redismysql">清理缓存--Redis与MySQL一致性<a class="headerlink" href="#-redismysql" title="Permanent link">&para;</a></h3>
<p>为了Redis和MySQL的一致性，清理缓存。</p>
<p>新增、修改、删除、起售停售</p>
<p>比如新增，修改Controller方法，在新增之后，不需要把所有缓存全清了，把当前菜品的<strong>分类下的</strong>缓存清掉就好了</p>
<div class="highlight"><pre><span></span><code><span class="nd">@PostMapping</span>
<span class="nd">@ApiOperation</span><span class="p">(</span><span class="s">&quot;新增菜品&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">DishDTO</span><span class="w"> </span><span class="n">dishDTO</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;新增菜品：{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">dishDTO</span><span class="p">);</span>
<span class="w">    </span><span class="n">dishService</span><span class="p">.</span><span class="na">saveWithFlavor</span><span class="p">(</span><span class="n">dishDTO</span><span class="p">);</span>

<span class="w">    </span><span class="c1">//清理缓存数据</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;dish_&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dishDTO</span><span class="p">.</span><span class="na">getCategoryId</span><span class="p">();</span>
<span class="w">    </span><span class="n">cleanCache</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Result</span><span class="p">.</span><span class="na">success</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Autowired</span>
<span class="kd">private</span><span class="w"> </span><span class="n">RedisTemplate</span><span class="w"> </span><span class="n">redisTemplate</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * 清理缓存数据</span>
<span class="cm"> * @param pattern</span>
<span class="cm"> */</span>
<span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">cleanCache</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">pattern</span><span class="p">){</span>
<span class="w">    </span><span class="n">Set</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">keys</span><span class="p">(</span><span class="n">pattern</span><span class="p">);</span>
<span class="w">    </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">keys</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>删除菜品的话就需要把所有菜品的缓存全删了，在删掉菜品的时候，套餐需不需要删？</p>
<p>既然能删，代表着任何套餐里都没有该菜品，所以套餐不用删！所以删掉dish_*即可</p>
<p>修改菜品的话，为什么要把所有菜品缓存全清掉</p>
<p>因为有可能修改了菜品的分类，那么就会有两个分类下的菜品变了，干脆全删</p>
<p>起售停售也是省得从菜品id再查菜品分类id，干脆全删</p>
<h3 id="-spring-cache">缓存套餐-- Spring Cache<a class="headerlink" href="#-spring-cache" title="Permanent link">&para;</a></h3>
<p>Spring Cache 提供了一层抽象，底层可以切换不同的缓存实现，例如：</p>
<ul>
<li>EHCache</li>
<li>Caffeine</li>
<li>Redis（常用）</li>
</ul>
<p>@EnableCaching 开启缓存注解功能，通常加在启动类上</p>
<p>@Cacheable 在方法执行前先查询缓存中是否有数据，如果有数据，则直接返回缓存数据；如果没有缓存数据，调用方法并将方法返回值放到缓存中</p>
<p>@CacheEvict 清理指定缓存</p>
<p><code>{cacheName}::{key}</code> 是默认的键格式，但可以通过 <code>key</code> 属性进行自定义</p>
<div class="highlight"><pre><span></span><code><span class="c1">//key: setmealCache_传入的id</span>
<span class="nd">@Cacheable</span><span class="p">(</span><span class="n">cacheNames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;setmealCache&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&#39;setmeal_&#39; + #categoryId&quot;</span><span class="p">)</span>
</code></pre></div>
<p>在用户端接口 SetmealController 的 list 方法上加入 @Cacheable注解</p>
<div class="highlight"><pre><span></span><code><span class="c1">//key: setmealCache::传入的id</span>
<span class="nd">@Cacheable</span><span class="p">(</span><span class="n">cacheNames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;setmealCache&quot;</span><span class="p">,</span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;#categoryId&quot;</span><span class="p">)</span><span class="w"> </span>
<span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Setmeal</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">categoryId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></pre></div>
<p>在管理端接口 SetmealController 的 save、delete、update、startOrStop 等方法上加入 CacheEvict 注解</p>
<div class="highlight"><pre><span></span><code><span class="c1">//key: setmealCache::传入的id</span>
<span class="nd">@CacheEvict</span><span class="p">(</span><span class="n">cacheNames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;setmealCache&quot;</span><span class="p">,</span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;#setmealDTO.categoryId&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">SetmealDTO</span><span class="w"> </span><span class="n">setmealDTO</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@CacheEvict</span><span class="p">(</span><span class="n">cacheNames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;setmealCache&quot;</span><span class="p">,</span><span class="n">allEntries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="c1">//删除userCache下所有的缓存数据</span>
<span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="nd">@RequestParam</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ids</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></pre></div>
<h3 id="_8">用户下单<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>用户下单后生成订单表orders和订单明细表order_detail</p>
<p>当一个订单下有多个商品的时候，没必要给每个商品都写上地址簿，餐具数量等等，所以开一个明细表</p>
<h3 id="_9">添加购物车<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>购物车需要保存到MySQL的shopping_cart表</p>
<h3 id="-">微信支付--内网穿透<a class="headerlink" href="#-" title="Permanent link">&para;</a></h3>
<p>微信官方返回给后端的预支付交易单 和 支付成功后微信官方返回给后端的消息 这两个接口需要很高的安全性</p>
<p>微信官方给出了解决方案：使用 微信支付平台证书、商户私钥文件 加密</p>
<p>那么微信官方怎样连接到我本地的后端呢？</p>
<p>内网穿透，使用cpolar软件获得一个临时域名</p>
<h3 id="-java8api">再来一单--Java8流式API<a class="headerlink" href="#-java8api" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 再来一单</span>
<span class="cm"> * @param id</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">repetition</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 查询当前用户id</span>
<span class="w">    </span><span class="n">Long</span><span class="w"> </span><span class="n">userId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseContext</span><span class="p">.</span><span class="na">getCurrentId</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// 根据订单id查询当前订单详情</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">OrderDetail</span><span class="o">&gt;</span><span class="w"> </span><span class="n">orderDetailList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">orderDetailMapper</span><span class="p">.</span><span class="na">getByOrderId</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 将订单详情对象转换为购物车对象</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ShoppingCart</span><span class="o">&gt;</span><span class="w"> </span><span class="n">shoppingCartList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">orderDetailList</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">map</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ShoppingCart</span><span class="w"> </span><span class="n">shoppingCart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ShoppingCart</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// 将原订单详情里面的菜品信息重新复制到购物车对象中</span>
<span class="w">        </span><span class="n">BeanUtils</span><span class="p">.</span><span class="na">copyProperties</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">shoppingCart</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;id&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">shoppingCart</span><span class="p">.</span><span class="na">setUserId</span><span class="p">(</span><span class="n">userId</span><span class="p">);</span>
<span class="w">        </span><span class="n">shoppingCart</span><span class="p">.</span><span class="na">setCreateTime</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">());</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">shoppingCart</span><span class="p">;</span>
<span class="w">    </span><span class="p">}).</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>

<span class="w">    </span><span class="c1">// 将购物车对象批量添加到数据库</span>
<span class="w">    </span><span class="n">shoppingCartMapper</span><span class="p">.</span><span class="na">insertBatch</span><span class="p">(</span><span class="n">shoppingCartList</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>用到了Java8的流式API操作</p>
<h3 id="_10">校验收货地址是否超出配送范围<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>使用的百度地图开放平台的API</p>
<h3 id="-spring-task">订单状态定时处理-- Spring Task<a class="headerlink" href="#-spring-task" title="Permanent link">&para;</a></h3>
<ul>
<li>通过定时任务每分钟检查一次是否存在支付超时订单（下单后超过 15 分钟仍未支付则判定为支付超时订单），如果存在则修改订单状态为 “已取消”</li>
<li>通过定时任务每天凌晨 1 点检查一次是否存在 “派送中” 的订单，如果存在则修改订单状态为 “已完成”</li>
</ul>
<p>使用Spring Task</p>
<p>启动类上加注解@EnableScheduling，</p>
<p>自定义定时任务类，类上加@Component，方法上加@Scheduled(cron = "0/5 * * * * ?")</p>
<p>其中，Cron表达式<a href="https://cron.qqe2.com/">在线生成网址</a>，可以定义定义任务触发的时间</p>
<h3 id="-websocket">来单提醒--WebSocket<a class="headerlink" href="#-websocket" title="Permanent link">&para;</a></h3>
<p>语音播报+弹出提示框</p>
<p>流程：使用WebSocket建立连接，客户交完钱，后端就往网页上发消息，网页解析消息，判断是来单提醒还是催单，然后发出相应的播报</p>
<div class="highlight"><pre><span></span><code><span class="c1">//通过websocket向客户端浏览器推送消息</span>
<span class="w">    </span><span class="n">Map</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span>
<span class="w">    </span><span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="c1">//1表示来单提醒，2代表用户催单</span>
<span class="w">    </span><span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;orderId&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<span class="w">    </span><span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;content&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;订单号：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">orders</span><span class="p">.</span><span class="na">getNumber</span><span class="p">());</span>
<span class="w">    </span><span class="n">webSocketServer</span><span class="p">.</span><span class="na">sendToAllClient</span><span class="p">(</span><span class="n">JSON</span><span class="p">.</span><span class="na">toJSONString</span><span class="p">(</span><span class="n">map</span><span class="p">));</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      刘钰 CC-BY-4.0
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/liuyu-2003" target="_blank" rel="noopener" title="Github | liuyu-2003" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "navigation.indexes", "navigation.expand", "search.suggest", "search.highlight", "content.code.copy", "content.action.edit"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../mkdocs/javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>